<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFO Dashboard | Zenith OS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-white: #FFFFFF; --bg-light: #F8FAFC; --bg-gray: #F1F5F9;
            --accent-amber: #F59E0B; --accent-emerald: #10B981; --accent-cyan: #06B6D4;
            --accent-blue: #3B82F6; --accent-violet: #8B5CF6; --accent-rose: #F43F5E;
            --text-primary: #1E293B; --text-secondary: #475569; --text-muted: #64748B;
            --border: #E2E8F0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-light); color: var(--text-primary); min-height: 100vh; display: flex; }
        .sidebar { width: 260px; background: var(--bg-white); border-right: 1px solid var(--border); position: fixed; height: 100vh; display: flex; flex-direction: column; }
        .sidebar-header { padding: 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 12px; }
        .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, var(--accent-amber), #D97706); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; }
        .logo-text h1 { font-size: 16px; font-weight: 700; }
        .logo-text p { font-size: 11px; color: var(--text-muted); }
        .sidebar-nav { flex: 1; padding: 16px 12px; overflow-y: auto; }
        .nav-section { margin-bottom: 20px; }
        .nav-section-label { font-size: 10px; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1.5px; padding: 0 12px; margin-bottom: 8px; }
        .nav-item { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 8px; color: var(--text-secondary); text-decoration: none; font-size: 14px; margin-bottom: 2px; }
        .nav-item:hover { background: var(--bg-gray); }
        .nav-item.active { background: rgba(245, 158, 11, 0.1); color: var(--accent-amber); }
        .nav-item.csuite { border: 1px solid rgba(16, 185, 129, 0.3); background: rgba(16, 185, 129, 0.05); }
        .sidebar-footer { padding: 16px; border-top: 1px solid var(--border); }
        .back-link { display: flex; align-items: center; gap: 8px; color: var(--text-secondary); text-decoration: none; font-size: 13px; padding: 10px 12px; border-radius: 8px; }
        .main-content { flex: 1; margin-left: 260px; }
        .topbar { height: 64px; background: var(--bg-white); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 32px; position: sticky; top: 0; z-index: 50; }
        .topbar-title { font-size: 20px; font-weight: 700; }
        .topbar-actions { display: flex; gap: 12px; }
        .btn { padding: 10px 20px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; border: none; display: inline-flex; align-items: center; gap: 8px; }
        .btn-primary { background: var(--accent-amber); color: white; }
        .btn-ghost { background: transparent; color: var(--text-secondary); border: 1px solid var(--border); }
        .content-area { padding: 32px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 32px; }
        .stat-card { background: var(--bg-white); border: 1px solid var(--border); border-radius: 12px; padding: 20px; }
        .stat-label { font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
        .stat-value { font-size: 28px; font-weight: 700; }
        .stat-value.revenue { color: var(--accent-emerald); }
        .stat-change { font-size: 12px; color: var(--accent-emerald); margin-top: 4px; }
        .grid-2 { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; margin-bottom: 32px; }
        .card { background: var(--bg-white); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
        .card-header { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
        .card-title { font-size: 14px; font-weight: 600; }
        .card-body { padding: 20px; }
        .platform-fee-box { background: var(--bg-gray); border-radius: 10px; padding: 20px; }
        .fee-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border); }
        .fee-row:last-child { border-bottom: none; }
        .fee-label { color: var(--text-secondary); font-size: 14px; }
        .fee-value { font-weight: 600; font-size: 14px; }
        .fee-value.highlight { color: var(--accent-amber); font-size: 24px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 14px 16px; text-align: left; border-bottom: 1px solid var(--border); }
        th { font-size: 11px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; background: var(--bg-gray); }
        .amount { font-weight: 600; color: var(--accent-emerald); }
        .amount-fee { font-size: 11px; color: var(--text-muted); }
        .chart-placeholder { height: 200px; background: var(--bg-gray); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--text-muted); }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo-icon">üí∞</div>
            <div class="logo-text"><h1>CFO Dashboard</h1><p>Financial Intelligence</p></div>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-label">Financials</div>
                <a href="/cfo" class="nav-item active"><span>üìä</span> Overview</a>
                <a href="#" class="nav-item"><span>üíµ</span> Revenue</a>
                <a href="#" class="nav-item"><span>üìã</span> Transactions</a>
            </div>
            <div class="nav-section">
                <div class="nav-section-label">C-Suite</div>
                <a href="/command" class="nav-item csuite"><span>üéØ</span> Command Center</a>
            </div>
            <div class="nav-section">
                <div class="nav-section-label">Navigate</div>
                <a href="/dashboard" class="nav-item"><span>üè†</span> AXIS Home</a>
                <a href="/crm" class="nav-item"><span>üìä</span> CRM</a>
            </div>
        </nav>
        <div class="sidebar-footer"><a href="/dashboard" class="back-link">‚Üê Back to AXIS</a></div>
    </aside>

    <main class="main-content">
        <header class="topbar">
            <h1 class="topbar-title">Financial Overview</h1>
            <div class="topbar-actions">
                <button class="btn btn-ghost">üì• Export</button>
                <button class="btn btn-primary">+ Record Transaction</button>
            </div>
        </header>

        <div class="content-area">
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-label">Revenue (All Time)</div><div class="stat-value revenue">$0</div><div class="stat-change">Record transactions below</div></div>
                <div class="stat-card"><div class="stat-label">This Month</div><div class="stat-value revenue">$0</div><div class="stat-change">Current period</div></div>
                <div class="stat-card"><div class="stat-label">Transactions</div><div class="stat-value"><%= transactions ? transactions.length : 0 %></div><div class="stat-change">This period</div></div>
                <div class="stat-card"><div class="stat-label">Platform Fees (MSG)</div><div class="stat-value">$0</div><div class="stat-change">5% revenue share</div></div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <div class="card-header"><span class="card-title">Revenue Trend</span></div>
                    <div class="card-body"><div class="chart-placeholder">üìà Revenue chart visualization</div></div>
                </div>
                <div class="card">
                    <div class="card-header"><span class="card-title">Platform Fees (MSG)</span></div>
                    <div class="card-body">
                        <div class="platform-fee-box">
                            <div class="fee-row"><span class="fee-label">Total Accrued</span><span class="fee-value">$0</span></div>
                            <div class="fee-row"><span class="fee-label">Total Paid</span><span class="fee-value">$0</span></div>
                            <div class="fee-row"><span class="fee-label"><strong>Balance Owed</strong></span><span class="fee-value highlight">$0</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">Recent Transactions</span></div>
                <table>
                    <thead><tr><th>Customer</th><th>Description</th><th>Gross</th><th>Fee</th><th>Net</th><th>Date</th></tr></thead>
                    <tbody>
                        <% if (transactions && transactions.length > 0) { %>
                            <% transactions.forEach(t => { %>
                            <tr>
                                <td><%= t.customer_name %></td>
                                <td><%= t.description %></td>
                                <td class="amount">$<%= Number(t.amount || 0).toLocaleString() %></td>
                                <td class="amount-fee">-$<%= Number(t.platform_fee || 0).toLocaleString() %></td>
                                <td>$<%= (Number(t.amount || 0) - Number(t.platform_fee || 0)).toLocaleString() %></td>
                                <td><%= t.date ? new Date(t.date).toLocaleDateString() : '-' %></td>
                            </tr>
                            <% }); %>
                        <% } else { %>
                            <tr><td colspan="6" style="text-align: center; padding: 40px; color: var(--text-muted);">No transactions recorded yet. Click "+ Record Transaction" to add your first.</td></tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
<%- include('partials/notification-bubble') %>
</body>
</html>
